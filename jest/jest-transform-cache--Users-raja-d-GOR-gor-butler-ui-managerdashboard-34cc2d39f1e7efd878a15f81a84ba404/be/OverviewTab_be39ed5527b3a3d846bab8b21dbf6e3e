/* istanbul ignore next */'use strict';Object.defineProperty(exports, "__esModule", { value: true });var _jsxFileName = '/Users/raja.d/GOR/gor.butler.ui.managerdashboard/src/containers/OverviewTab.js'; /**
                                                                                                                                                                                                           * Container for Overview tab
                                                                                                                                                                                                           * This will be switched based on tab click
                                                                                                                                                                                                           */
var /* istanbul ignore next */_react = require('react'); /* istanbul ignore next */var _react2 = _interopRequireDefault(_react);
var /* istanbul ignore next */_orderStatsWidget = require('../containers/orderStatsWidget'); /* istanbul ignore next */var _orderStatsWidget2 = _interopRequireDefault(_orderStatsWidget);
var /* istanbul ignore next */_performanceWidget = require('../containers/performanceWidget'); /* istanbul ignore next */var _performanceWidget2 = _interopRequireDefault(_performanceWidget);
var /* istanbul ignore next */_auditStatusWidget = require('../containers/auditStatusWidget'); /* istanbul ignore next */var _auditStatusWidget2 = _interopRequireDefault(_auditStatusWidget);
var /* istanbul ignore next */_putStatusWidget = require('../containers/putStatusWidget'); /* istanbul ignore next */var _putStatusWidget2 = _interopRequireDefault(_putStatusWidget);
var /* istanbul ignore next */_pickStatusWidget = require('../containers/pickStatusWidget'); /* istanbul ignore next */var _pickStatusWidget2 = _interopRequireDefault(_pickStatusWidget);
var /* istanbul ignore next */_reactRedux = require('react-redux');
var /* istanbul ignore next */_reactDimensions = require('react-dimensions'); /* istanbul ignore next */var _reactDimensions2 = _interopRequireDefault(_reactDimensions);
var /* istanbul ignore next */_socketActions = require('./../actions/socketActions');
var /* istanbul ignore next */_initData = require('./../constants/initData.js');
var /* istanbul ignore next */_frontEndConstants = require('./../constants/frontEndConstants');
var /* istanbul ignore next */_overviewActions = require('./../actions/overviewActions'); /* istanbul ignore next */function _interopRequireDefault(obj) {return obj && obj.__esModule ? obj : { default: obj };}


class Overview extends /* istanbul ignore next */_react2.default.Component {
    constructor(props) {
        super(props);
        this.state = { subscribed: false };
    }

    componentWillMount() {
        /**
                           * It will update the last refreshed property of
                           * overview details, so that updated subscription
                           * packet can be sent to the server for data
                           * update.
                           */
        this.props.updateOverviewProps();
    }

    componentWillReceiveProps(nextProps) {
        if (nextProps.socketAuthorized && !this.state.subscribed) {
            this.setState({ subscribed: true });
            this._subscribeData(nextProps);
        }
    }

    componentWillUnmount() {
        /**
                             * If a user navigates back to the inventory page,
                             * it should subscribe to the packet again.
                             */
        this.setState({ subscribed: false });
    }

    _subscribeData(nextProps) {
        let updatedWsSubscription = this.props.wsSubscriptionData;
        this.props.initDataSentCall(updatedWsSubscription["default"]);
        this.props.updateSubscriptionPacket(updatedWsSubscription);
    }


    render() {
        return (
            /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'gorWidgetWrap', __source: { fileName: _jsxFileName, lineNumber: 59 }, __self: this },
                /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'section group', __source: { fileName: _jsxFileName, lineNumber: 60 }, __self: this },
                    /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'col span_2_of_4', __source: { fileName: _jsxFileName, lineNumber: 61 }, __self: this },
                        /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_putStatusWidget2.default, /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 62 }, __self: this }),
                        /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_auditStatusWidget2.default, /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 63 }, __self: this })),


                    /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ className: 'col span_2_of_4 gorNoML', __source: { fileName: _jsxFileName, lineNumber: 66 }, __self: this },
                        /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_pickStatusWidget2.default, /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 67 }, __self: this }))),


                /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */'div', /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 70 }, __self: this },
                    /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_orderStatsWidget2.default, /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 71 }, __self: this }),
                    /* istanbul ignore next */_react2.default.createElement( /* istanbul ignore next */_performanceWidget2.default, /* istanbul ignore next */{ __source: { fileName: _jsxFileName, lineNumber: 72 }, __self: this }))));



    }}



function mapStateToProps(state, ownProps) {
    return {
        wsSubscriptionData: state.recieveSocketActions.socketDataSubscriptionPacket || /* istanbul ignore next */_initData.wsOverviewData,
        socketAuthorized: state.recieveSocketActions.socketAuthorized,
        overviewRefreshed: state.overviewDetails.overviewRefreshed };

}
function mapDispatchToProps(dispatch) {
    return {
        initDataSentCall: function /* istanbul ignore next */initDataSentCall(data) {
            dispatch( /* istanbul ignore next */(0, _socketActions.setWsAction)({ type: /* istanbul ignore next */_frontEndConstants.WS_ONSEND, data: data }));
        },
        updateSubscriptionPacket: function /* istanbul ignore next */updateSubscriptionPacket(data) {
            dispatch( /* istanbul ignore next */(0, _socketActions.updateSubscriptionPacket)(data));
        },
        updateOverviewProps: function /* istanbul ignore next */updateOverviewProps(data) {
            dispatch( /* istanbul ignore next */(0, _overviewActions.overviewRefreshed)(data));
        } };

}; /* istanbul ignore next */exports.default =

/* istanbul ignore next */(0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)( /* istanbul ignore next */(0, _reactDimensions2.default)()(Overview));